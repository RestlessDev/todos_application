const AppClass = require("./App");

let routes = <%- routes %>;
let modals = <%- modals %>;
let ejs = <%- ejs %>;
let componentList = <%- componentList %>;
let controllerList = <%- controllerList %>;
let controllers = {};
let componentClasses = {};
let models = require("./models/models");
let config = require("./config/app");

// we need to require and instantiate all of the controllers
for(let i in controllerList) {
  let temp = require(`./controllers/${controllerList[i]}`);
  controllers[controllerList[i]] = new temp(); 
}

// we need to require and instantiate all of the controllers
for(let i in componentList) {
  let temp = require(`./components/${componentList[i]}/component`);
  componentClasses[componentList[i].toLowerCase()] = temp; 
}

window.App = new AppClass();

window.App.setRoutes(routes);
window.App.setModals(modals);
window.App.setConfig(config);
window.App.setModels(models);
window.App.setComponentClasses(componentClasses);
window.App.setControllers(controllers);
window.App.setEJS(ejs);

window.App.openPath(window.location.pathname);